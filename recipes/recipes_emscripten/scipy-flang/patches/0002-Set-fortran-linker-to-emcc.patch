From c656ea5647b17ef480ec0b28a73a7837ad91515b Mon Sep 17 00:00:00 2001
From: Isabel Paredes <isabel.paredes@quantstack.net>
Date: Wed, 7 May 2025 17:13:16 +0200
Subject: [PATCH 2/4] Set fortran linker to emcc

---
 scipy/integrate/meson.build                   | 10 +++++-----
 scipy/interpolate/meson.build                 |  4 ++--
 scipy/io/meson.build                          |  2 +-
 scipy/odr/meson.build                         |  2 +-
 scipy/optimize/meson.build                    |  4 ++--
 scipy/sparse/linalg/_eigen/arpack/meson.build |  2 +-
 scipy/sparse/linalg/_propack/meson.build      |  2 +-
 scipy/stats/meson.build                       |  2 +-
 8 files changed, 14 insertions(+), 14 deletions(-)

diff --git a/scipy/integrate/meson.build b/scipy/integrate/meson.build
index 206d504..4c6b36e 100644
--- a/scipy/integrate/meson.build
+++ b/scipy/integrate/meson.build
@@ -75,7 +75,7 @@ py3.extension_module('_odepack',
   link_args: version_link_args,
   dependencies: [lapack_dep, np_dep],
   install: true,
-  link_language: 'fortran',
+  link_language: 'c',
   subdir: 'scipy/integrate'
 )
 
@@ -86,7 +86,7 @@ py3.extension_module('_vode',
   link_args: version_link_args,
   dependencies: [lapack_dep, blas_dep, fortranobject_dep],
   install: true,
-  link_language: 'fortran',
+  link_language: 'c',
   subdir: 'scipy/integrate'
 )
 
@@ -97,7 +97,7 @@ py3.extension_module('_lsoda',
   dependencies: [lapack_dep, fortranobject_dep],
   link_args: version_link_args,
   install: true,
-  link_language: 'fortran',
+  link_language: 'c',
   subdir: 'scipy/integrate'
 )
 
@@ -108,7 +108,7 @@ py3.extension_module('_dop',
   dependencies: [fortranobject_dep],
   link_args: version_link_args,
   install: true,
-  link_language: 'fortran',
+  link_language: 'c',
   subdir: 'scipy/integrate'
 )
 
@@ -127,7 +127,7 @@ py3.extension_module('_test_odeint_banded',
   link_args: version_link_args,
   dependencies: [lapack_dep, fortranobject_dep],
   install: true,
-  link_language: 'fortran',
+  link_language: 'c',
   subdir: 'scipy/integrate',
   install_tag: 'tests'
 )
diff --git a/scipy/interpolate/meson.build b/scipy/interpolate/meson.build
index 72e2d20..5d54dbf 100644
--- a/scipy/interpolate/meson.build
+++ b/scipy/interpolate/meson.build
@@ -157,7 +157,7 @@ py3.extension_module('_fitpack',
   include_directories: 'src/',
   dependencies: np_dep,
   link_args: version_link_args,
-  link_language: 'fortran',
+  link_language: 'c',
   install: true,
   subdir: 'scipy/interpolate'
 )
@@ -171,7 +171,7 @@ py3.extension_module('_dfitpack',
   link_with: [fitpack_lib],
   override_options: ['b_lto=false'],
   install: true,
-  link_language: 'fortran',
+  link_language: 'c',
   subdir: 'scipy/interpolate'
 )
 
diff --git a/scipy/io/meson.build b/scipy/io/meson.build
index 60f71c6..abdf285 100644
--- a/scipy/io/meson.build
+++ b/scipy/io/meson.build
@@ -8,7 +8,7 @@ py3.extension_module('_test_fortran',
   link_args: version_link_args,
   dependencies: [lapack_dep, fortranobject_dep],
   install: true,
-  link_language: 'fortran',
+  link_language: 'c',
   subdir: 'scipy/io',
   install_tag: 'tests'
 )
diff --git a/scipy/odr/meson.build b/scipy/odr/meson.build
index c7f53bc..eedf439 100644
--- a/scipy/odr/meson.build
+++ b/scipy/odr/meson.build
@@ -16,7 +16,7 @@ py3.extension_module('__odrpack',
   link_args: version_link_args,
   dependencies: [blas_dep, np_dep],
   install: true,
-  link_language: 'fortran',
+  link_language: 'c',
   subdir: 'scipy/odr'
 )
 
diff --git a/scipy/optimize/meson.build b/scipy/optimize/meson.build
index 519755e..1792f21 100644
--- a/scipy/optimize/meson.build
+++ b/scipy/optimize/meson.build
@@ -92,7 +92,7 @@ py3.extension_module('_cobyla',
   link_args: version_link_args,
   dependencies: [fortranobject_dep],
   install: true,
-  link_language: 'fortran',
+  link_language: 'c',
   subdir: 'scipy/optimize'
 )
 
@@ -102,7 +102,7 @@ py3.extension_module('_slsqp',
   link_args: version_link_args,
   dependencies: [fortranobject_dep],
   install: true,
-  link_language: 'fortran',
+  link_language: 'c',
   subdir: 'scipy/optimize'
 )
 
diff --git a/scipy/sparse/linalg/_eigen/arpack/meson.build b/scipy/sparse/linalg/_eigen/arpack/meson.build
index 52c8ab9..9bbf053 100644
--- a/scipy/sparse/linalg/_eigen/arpack/meson.build
+++ b/scipy/sparse/linalg/_eigen/arpack/meson.build
@@ -107,7 +107,7 @@ _arpack = py3.extension_module('_arpack',
   link_args: version_link_args,
   dependencies: [lapack_dep, blas_dep, fortranobject_dep],
   install: true,
-  link_language: 'fortran',
+  link_language: 'c',
   subdir: 'scipy/sparse/linalg/_eigen/arpack'
 )
 
diff --git a/scipy/sparse/linalg/_propack/meson.build b/scipy/sparse/linalg/_propack/meson.build
index d33cdc0..75ba1a3 100644
--- a/scipy/sparse/linalg/_propack/meson.build
+++ b/scipy/sparse/linalg/_propack/meson.build
@@ -107,7 +107,7 @@ foreach ele: elements
     dependencies: [lapack_dep, blas_dep, fortranobject_dep],
     link_args: version_link_args,
     install: true,
-    link_language: 'fortran',
+    link_language: 'c',
     subdir: 'scipy/sparse/linalg/_propack'
   )
 endforeach
diff --git a/scipy/stats/meson.build b/scipy/stats/meson.build
index a9f9365..d99a944 100644
--- a/scipy/stats/meson.build
+++ b/scipy/stats/meson.build
@@ -39,7 +39,7 @@ py3.extension_module('_mvn',
   dependencies: [fortranobject_dep],
   link_args: version_link_args,
   install: true,
-  link_language: 'fortran',
+  link_language: 'c',
   subdir: 'scipy/stats'
 )
 
